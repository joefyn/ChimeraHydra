ChimeraHydra — Handover Boilerplate (vFMO) 0) Executive Snapshot Repo: joefyn/ChimeraHydra Truth branch: main (protected) Gate workflow: .github/workflows/chimerahydra-gate.yml Gate status context: chimera-gate / gate (legacy commit status) PR in focus: [specify PR number explicitly here] Note: replace bracketed items explicitly; no silent placeholders. 1) Operating Contract (baked-in) One step per reply. Exactly one actionable command. PowerShell one-liners. Multi-line goes in repo docs, not chat. Machine-friendly output. Every check prints one line: response: <tiny fact or compact JSON> Evidence gate. After each command, paste back the single response: line. Scope lock. Default scope is the repo + Gate above; say “change scope” to alter it. No echo. If a doc is created elsewhere, we’ll reference it, not paste it here. 2) Minimal Success Criteria (the spine) Gate writes success/failure to the PR head SHA and branch protection requires it (strict=true). Hashing/anchors are stable (blob-based or LF-locked). Three artifacts have schemas and are validated: prompt.audit.json, code.plan.json, codex.instructions.json. Tiny Python CLI exists to emit those artifacts (chimera intent, chimera plan). Gate reads artifacts → emits verdict → sets legacy status on PR head. 3) One-Liner Check Pattern (copy/paste) Pattern: Do work → compute fact → print once Write-Host "=== <TITLE> ===" -ForegroundColor Cyan; <cmds>; Write-Host ("response: " + <value-or-minified-JSON>) Example (branch protection strict + contexts): Write-Host "=== BRANCH PROTECTION (main) ===" -ForegroundColor Cyan; $j = & "$Env:ProgramFiles\GitHub CLI\gh.exe" api repos/joefyn/ChimeraHydra/branches/main/protection --jq '{strict:.required_status_checks.strict,contexts:.required_status_checks.contexts}'; Write-Host ("response: " + ($j -replace '\s+', ' ')) 4) Actions Index (lettered sub-steps) Action 1 — Gate YAML sanity 1a perms block → 1b statuses: write → 1c sha: targets PR head → 1d failure status exists → 1e latest run on PR head Action 2 — Branch protection 2a contexts → 2b strict → 2c admin enforcement → 2d extraneous checks? Action 3 — Line endings 3a .gitattributes → 3b core.autocrlf → 3c choose blob-hash path (preferred) Action 4 — Artifact schemas + CI validation 4a audit schema → 4b plan schema → 4c instructions schema → 4d validate in CI Action 5 — Python CLI (Track A) 5a package layout → 5b chimera intent (run_id) → 5c chimera context (optional) → 5d chimera plan Action 9 — Gate hardening 9a aggregate reports → 9b gate.decision.json → 9c SUMMARY.md → 9d write success/failure to PR head The rest (6,7,8,10,11) are deferred by default—listed below. 5) Deferred Actions (tracked, not forgotten) Action 6 — Glossary lock & drift checks: policy/glossary.lock.json, optional synonyms, checker in Gate (fails on paraphrase/rename). Action 7 — Bridge strictness: codex.instructions.json with expect_sha + selector assertions; abort on selector miss; version pins. Action 8 — Execute & reports: literal op execution; emit changeset.diff, lint.report.json, test.report.json; CRLF/LF safety; shared run_id. Action 10 — Adopt (diff→ops): deterministic hunk→ops mapping; add/delete/rename handling; CAUSE codes on ambiguity. Action 11 — Observability: artifacts/<ts>/<run_id>/run.log JSONL per phase; durations, model, tokens, cache hits; artifacts indexer. 6) Quick Commands Library (pre-baked) PR head SHA → last legacy status Write-Host "=== LEGACY STATUS (PR HEAD) ===" -ForegroundColor Cyan; $sha = & "$Env:ProgramFiles\GitHub CLI\gh.exe" pr view <PR#> --json headRefOid --jq .headRefOid; $j = & "$Env:ProgramFiles\GitHub CLI\gh.exe" api repos/joefyn/ChimeraHydra/statuses/$sha --jq '.[0] | {context,state,target_url}'; Write-Host ("response: " + ($j -replace '\s+', ' ')) Gate YAML → find sha target Write-Host "=== GATE YAML: sha target ===" -ForegroundColor Cyan; $y = & "$Env:ProgramFiles\GitHub CLI\gh.exe" api repos/joefyn/ChimeraHydra/contents/.github/workflows/chimerahydra-gate.yml --jq .content; $txt = [Text.Encoding]::UTF8.GetString([Convert]::FromBase64String($y)); $shaLine = ($txt -split "n") | Select-String '^\s*sha:\s*\${{\s*github\.(event\.pull_request\.head\.sha|sha)\s*}}' | % { $_.Line.Trim() } | Select -First 1; if ($shaLine) { Write-Host ("response: " + $shaLine) } else { Write-Host "response: missing" } Branch protection strict + contexts Write-Host "=== BRANCH PROTECTION (main) ===" -ForegroundColor Cyan; $j = & "$Env:ProgramFiles\GitHub CLI\gh.exe" api repos/joefyn/ChimeraHydra/branches/main/protection --jq '{strict:.required_status_checks.strict,contexts:.required_status_checks.contexts}'; Write-Host ("response: " + ($j -replace '\s+', ' ')) 7) Minimal File Shapes (brief, enforceable) Schemas: commit schemas/prompt.audit.schema.json, schemas/code.plan.schema.json, schemas/codex.instructions.schema.json. Artifacts: emit to artifacts/<timestamp>/<run_id>/ with deterministic names. CLI (Python): cli/chimera.py with subcommands intent, plan (stubs acceptable initially, but schema-valid). 8) Merge Policy (short) Only merge when: a) branch protection shows green on chimera-gate / gate for the PR head SHA, and b) gate.decision.json exists with verdict="approve" for the same run_id. 9) Evidence Pasteback (always) After each command, paste only one line: response: <…> —

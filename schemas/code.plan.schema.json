{
    "title":  "code.plan.json schema",
    "type":  "object",
    "additionalProperties":  false,
    "required":  [
                     "run_id",
                     "ops"
                 ],
    "properties":  {
                       "run_id":  {
                                      "type":  "string",
                                      "minLength":  6
                                  },
                       "ts":  {
                                  "type":  "string",
                                  "format":  "date-time"
                              },
                       "ops":  {
                                   "type":  "array",
                                   "minItems":  1,
                                   "items":  {
                                                 "type":  "object",
                                                 "additionalProperties":  false,
                                                 "required":  [
                                                                  "selector",
                                                                  "change"
                                                              ],
                                                 "properties":  {
                                                                    "id":  {
                                                                               "type":  "string"
                                                                           },
                                                                    "selector":  {
                                                                                     "type":  "object",
                                                                                     "additionalProperties":  false,
                                                                                     "required":  [
                                                                                                      "file",
                                                                                                      "expect_sha"
                                                                                                  ],
                                                                                     "properties":  {
                                                                                                        "file":  {
                                                                                                                     "type":  "string"
                                                                                                                 },
                                                                                                        "expect_sha":  {
                                                                                                                           "type":  "string",
                                                                                                                           "pattern":  "^[0-9a-fA-F]{40}$"
                                                                                                                       },
                                                                                                        "kind":  {
                                                                                                                     "type":  "string",
                                                                                                                     "enum":  [
                                                                                                                                  "anchor",
                                                                                                                                  "symbol",
                                                                                                                                  "line_range"
                                                                                                                              ]
                                                                                                                 },
                                                                                                        "anchor":  {
                                                                                                                       "type":  "string"
                                                                                                                   },
                                                                                                        "symbol":  {
                                                                                                                       "type":  "string"
                                                                                                                   },
                                                                                                        "lang":  {
                                                                                                                     "type":  "string"
                                                                                                                 },
                                                                                                        "line_range":  {
                                                                                                                           "type":  "object",
                                                                                                                           "additionalProperties":  false,
                                                                                                                           "required":  [
                                                                                                                                            "start",
                                                                                                                                            "end"
                                                                                                                                        ],
                                                                                                                           "properties":  {
                                                                                                                                              "start":  {
                                                                                                                                                            "type":  "integer",
                                                                                                                                                            "minimum":  1
                                                                                                                                                        },
                                                                                                                                              "end":  {
                                                                                                                                                          "type":  "integer",
                                                                                                                                                          "minimum":  1
                                                                                                                                                      }
                                                                                                                                          }
                                                                                                                       }
                                                                                                    }
                                                                                 },
                                                                    "change":  {
                                                                                   "type":  "object",
                                                                                   "additionalProperties":  false,
                                                                                   "required":  [
                                                                                                    "op"
                                                                                                ],
                                                                                   "properties":  {
                                                                                                      "op":  {
                                                                                                                 "type":  "string",
                                                                                                                 "enum":  [
                                                                                                                              "insert",
                                                                                                                              "replace",
                                                                                                                              "delete"
                                                                                                                          ]
                                                                                                             },
                                                                                                      "content":  {
                                                                                                                      "type":  "string"
                                                                                                                  }
                                                                                                  }
                                                                               }
                                                                }
                                             }
                               }
                   },
    "$schema":  "https://json-schema.org/draft/2020-12/schema",
    "$id":  "https://joefyn.github.io/ChimeraHydra/schemas/code.plan.schema.json"
}
